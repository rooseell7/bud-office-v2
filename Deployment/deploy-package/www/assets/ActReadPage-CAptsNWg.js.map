{"version":3,"file":"ActReadPage-CAptsNWg.js","sources":["../../src/pages/acts/ActReadPage.tsx"],"sourcesContent":["/**\r\n * Read-only view of Act — PDF-like layout, all sections, Works only, print.\r\n * NO Sheet/Grid imports — static tables only.\r\n */\r\n\r\nimport React, { useEffect, useState, useCallback } from 'react';\r\nimport { useNavigate, useParams, useLocation } from 'react-router-dom';\r\nimport { Box, Button, Typography } from '@mui/material';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport PrintIcon from '@mui/icons-material/Print';\r\nimport { getAct } from '../../api/acts';\r\nimport { formatUaMoney, formatPercent } from '../../sheet/utils/computeTotals';\r\nimport { worksSheetColumnHeaders } from '../../sheet/configs/worksSheetConfig';\r\n\r\nfunction n(v: unknown): number {\r\n  if (v === null || v === undefined) return 0;\r\n  const x = Number(v);\r\n  return Number.isFinite(x) ? x : 0;\r\n}\r\n\r\nfunction extractSectionsAndWorks(items: any[]): { sectionKey: string; title: string; works: any[] }[] {\r\n  const out: { sectionKey: string; title: string; works: any[] }[] = [];\r\n  let current: { sectionKey: string; title: string; works: any[] } | null = null;\r\n  for (const r of items) {\r\n    const t = r?.rowType ?? r?.type;\r\n    if (t === 'section') {\r\n      current = {\r\n        sectionKey: r?.sectionKey ?? 'sec_1',\r\n        title: String(r?.title ?? 'Роботи'),\r\n        works: [],\r\n      };\r\n      out.push(current);\r\n    } else if (t === 'work' && current) {\r\n      current.works.push(r);\r\n    }\r\n  }\r\n  if (out.length === 0) {\r\n    const works = (items ?? []).filter((r) => (r?.rowType ?? r?.type) === 'work');\r\n    out.push({ sectionKey: 'sec_1', title: 'Роботи', works });\r\n  }\r\n  return out;\r\n}\r\n\r\n/** Convert work row to display row [num, name, unit, qty, price, total, costUnit, costTotal, note] */\r\nfunction workToRow(w: any, idx: number): string[] {\r\n  const qty = n(w?.qty);\r\n  const price = n(w?.price);\r\n  const costUnit = n(w?.costPrice ?? w?.cost);\r\n  const total = qty * price;\r\n  const costTotal = qty * costUnit;\r\n  const fmt = (x: number) => x.toFixed(2).replace('.', ',').replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\r\n  return [\r\n    String(idx + 1),\r\n    String(w?.name ?? w?.title ?? ''),\r\n    String(w?.unit ?? ''),\r\n    String(qty),\r\n    fmt(price),\r\n    fmt(total),\r\n    fmt(costUnit),\r\n    fmt(costTotal),\r\n    String(w?.note ?? ''),\r\n  ];\r\n}\r\n\r\nexport const ActReadPage: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const loc = useLocation();\r\n  const actId = id ? parseInt(id, 10) : NaN;\r\n  const validId = Number.isFinite(actId) && actId > 0 ? actId : null;\r\n\r\n  const [act, setAct] = useState<Awaited<ReturnType<typeof getAct>> | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const goBack = useCallback(() => {\r\n    const target = (loc.state as { from?: string })?.from || '/estimate/acts';\r\n    window.location.href = target;\r\n  }, [loc.state]);\r\n\r\n  const handlePrint = useCallback(() => {\r\n    window.print();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!validId) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setError(null);\r\n    getAct(validId)\r\n      .then(setAct)\r\n      .catch((e: any) => {\r\n        setError(e?.message || 'Помилка завантаження');\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [validId]);\r\n\r\n  if (!validId) {\r\n    return (\r\n      <Box className=\"act-read noprint\">\r\n        <Button startIcon={<ArrowBackIcon />} onClick={() => navigate('/estimate/acts')}>\r\n          Назад\r\n        </Button>\r\n        <Typography color=\"error\" sx={{ mt: 2 }}>\r\n          Невірний ідентифікатор\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (loading && !act) {\r\n    return (\r\n      <Box className=\"act-read noprint\">\r\n        <Typography>Завантаження…</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error && !act) {\r\n    return (\r\n      <Box className=\"act-read noprint\">\r\n        <Button startIcon={<ArrowBackIcon />} onClick={goBack}>\r\n          Назад\r\n        </Button>\r\n        <Typography color=\"error\" sx={{ mt: 2 }}>\r\n          {error}\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const sections = extractSectionsAndWorks(act?.items ?? []);\r\n  const hideCost = false;\r\n\r\n  const agg = sections.reduce(\r\n    (a, sec) => {\r\n      for (const w of sec.works) {\r\n        const qty = n(w?.qty);\r\n        const price = n(w?.price);\r\n        const costUnit = n(w?.costPrice ?? w?.cost);\r\n        a.sum += qty * price;\r\n        a.cost += qty * costUnit;\r\n      }\r\n      return a;\r\n    },\r\n    { sum: 0, cost: 0 },\r\n  );\r\n  const totalSum = agg.sum;\r\n  const totalCost = agg.cost;\r\n  const totalProfit = totalSum - totalCost;\r\n  const marginPct = totalSum > 0 ? (totalProfit / totalSum) * 100 : 0;\r\n\r\n  const headersW = worksSheetColumnHeaders;\r\n  const visibleColsW = hideCost ? [0, 1, 2, 3, 4, 5, 8] : [0, 1, 2, 3, 4, 5, 6, 7, 8];\r\n  const headersVisible = headersW.filter((_, i) => visibleColsW.includes(i));\r\n\r\n  return (\r\n    <Box className=\"act-read\" sx={{ width: '100%', maxWidth: '100%' }}>\r\n      <Box\r\n        className=\"noprint\"\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 1,\r\n          mb: 2,\r\n          flexWrap: 'wrap',\r\n        }}\r\n      >\r\n        <Button size=\"small\" startIcon={<ArrowBackIcon />} onClick={goBack}>\r\n          Назад\r\n        </Button>\r\n        <Typography variant=\"h6\" sx={{ flex: 1 }}>\r\n          Акт №{act?.id} — режим читання\r\n        </Typography>\r\n        <Button size=\"small\" startIcon={<PrintIcon />} variant=\"contained\" onClick={handlePrint}>\r\n          Друк\r\n        </Button>\r\n      </Box>\r\n\r\n      {sections.length > 0 && (\r\n        <Box\r\n          className=\"act-read-totals\"\r\n          sx={{\r\n            display: 'flex',\r\n            flexWrap: 'wrap',\r\n            gap: 2,\r\n            p: 1,\r\n            mb: 2,\r\n            borderRadius: 1,\r\n            bgcolor: 'action.hover',\r\n            border: '1px solid',\r\n            borderColor: 'divider',\r\n          }}\r\n        >\r\n          <Typography sx={{ fontSize: 12, fontWeight: 600, color: 'text.secondary', mr: 1 }}>\r\n            Загалом по акту\r\n          </Typography>\r\n          <Box sx={{ display: 'flex', gap: 0.5, alignItems: 'baseline' }}>\r\n            <Typography sx={{ fontSize: 11, color: 'text.secondary' }}>Роботи:</Typography>\r\n            <Typography sx={{ fontSize: 13, fontWeight: 600 }}>{formatUaMoney(totalSum)}</Typography>\r\n          </Box>\r\n          <Box sx={{ display: 'flex', gap: 0.5, alignItems: 'baseline' }}>\r\n            <Typography sx={{ fontSize: 11, color: 'text.secondary' }}>Собівартість:</Typography>\r\n            <Typography sx={{ fontSize: 13, fontWeight: 600 }}>{formatUaMoney(totalCost)}</Typography>\r\n          </Box>\r\n          <Box sx={{ display: 'flex', gap: 0.5, alignItems: 'baseline' }}>\r\n            <Typography sx={{ fontSize: 11, color: 'text.secondary' }}>Маржа:</Typography>\r\n            <Typography sx={{ fontSize: 13, fontWeight: 600 }}>{formatPercent(marginPct)}</Typography>\r\n          </Box>\r\n          <Box sx={{ display: 'flex', gap: 0.5, alignItems: 'baseline' }}>\r\n            <Typography sx={{ fontSize: 11, color: 'text.secondary' }}>Прибуток:</Typography>\r\n            <Typography sx={{ fontSize: 13, fontWeight: 600 }}>{formatUaMoney(totalProfit)}</Typography>\r\n          </Box>\r\n        </Box>\r\n      )}\r\n\r\n      {sections.length === 0 ? (\r\n        <Typography color=\"text.secondary\">Немає секцій</Typography>\r\n      ) : (\r\n        sections.map((sec, idx) => {\r\n          const rows = sec.works.map((w, ri) => workToRow(w, ri));\r\n          const secSum = sec.works.reduce((a, w) => a + n(w?.qty) * n(w?.price), 0);\r\n          const secCost = sec.works.reduce((a, w) => a + n(w?.qty) * n(w?.costPrice ?? w?.cost), 0);\r\n          const secProfit = secSum - secCost;\r\n          const secMargin = secSum > 0 ? (secProfit / secSum) * 100 : 0;\r\n\r\n          return (\r\n            <Box\r\n              key={sec.sectionKey}\r\n              className=\"act-read-stage\"\r\n              sx={{\r\n                breakInside: 'avoid',\r\n                pageBreakInside: 'avoid',\r\n                mb: 3,\r\n                pb: 2,\r\n                borderBottom: '1px solid',\r\n                borderColor: 'divider',\r\n              }}\r\n            >\r\n              <Typography\r\n                variant=\"h6\"\r\n                sx={{\r\n                  mb: 1.5,\r\n                  pb: 0.5,\r\n                  borderBottom: '1px solid',\r\n                  borderColor: 'divider',\r\n                  fontWeight: 600,\r\n                }}\r\n              >\r\n                Секція {idx + 1}: {sec.title}\r\n              </Typography>\r\n\r\n              <Box sx={{ mb: 2 }}>\r\n                <Typography variant=\"subtitle2\" sx={{ mb: 0.5, fontWeight: 600 }}>\r\n                  Роботи\r\n                </Typography>\r\n                <Box\r\n                  component=\"table\"\r\n                  sx={{\r\n                    width: '100%',\r\n                    borderCollapse: 'collapse',\r\n                    fontSize: 13,\r\n                    '& th, & td': {\r\n                      border: '1px solid',\r\n                      borderColor: 'divider',\r\n                      px: 1,\r\n                      py: 0.5,\r\n                    },\r\n                    '& th': { bgcolor: 'action.hover', fontWeight: 600, textAlign: 'left' },\r\n                    '& td': { verticalAlign: 'top' },\r\n                    '& .num': { textAlign: 'right', fontVariantNumeric: 'tabular-nums' },\r\n                  }}\r\n                >\r\n                  <thead>\r\n                    <tr>\r\n                      {headersVisible.map((h, i) => {\r\n                        const colIdx = visibleColsW[i];\r\n                        return (\r\n                          <th key={i} className={colIdx != null && [4, 5, 6, 7].includes(colIdx) ? 'num' : ''}>\r\n                            {h}\r\n                          </th>\r\n                        );\r\n                      })}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {rows.length === 0 ? (\r\n                      <tr>\r\n                        <td colSpan={headersVisible.length}>—</td>\r\n                      </tr>\r\n                    ) : (\r\n                      rows.map((row, ri) => (\r\n                        <tr key={ri}>\r\n                          {visibleColsW.map((c, hi) => (\r\n                            <td key={hi} className={[4, 5, 6, 7].includes(c) ? 'num' : ''}>\r\n                              {row[c] ?? '—'}\r\n                            </td>\r\n                          ))}\r\n                        </tr>\r\n                      ))\r\n                    )}\r\n                  </tbody>\r\n                </Box>\r\n                <Box\r\n                  sx={{\r\n                    display: 'flex',\r\n                    justifyContent: 'flex-end',\r\n                    mt: 0.5,\r\n                    py: 0.75,\r\n                    px: 1,\r\n                    bgcolor: 'action.hover',\r\n                    borderRadius: 0.5,\r\n                    fontSize: 12,\r\n                  }}\r\n                >\r\n                  {hideCost ? (\r\n                    <span>Разом робіт: {formatUaMoney(secSum)}</span>\r\n                  ) : (\r\n                    <span>\r\n                      Разом: {formatUaMoney(secSum)} · Собівартість: {formatUaMoney(secCost)} · Прибуток:{' '}\r\n                      {formatUaMoney(secProfit)} · Маржа {formatPercent(secMargin)}\r\n                    </span>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          );\r\n        })\r\n      )}\r\n\r\n      <style>{`\r\n        @media print {\r\n          body * { visibility: hidden; }\r\n          .act-read, .act-read * { visibility: visible; }\r\n          .act-read { position: absolute; left: 0; top: 0; width: 100%; padding: 0; }\r\n          .noprint { display: none !important; }\r\n          .act-read-stage { break-inside: avoid; page-break-inside: avoid; }\r\n          .boHeader, .boSidebar, [class*=\"AppBar\"], [class*=\"Drawer\"] { display: none !important; }\r\n        }\r\n      `}</style>\r\n    </Box>\r\n  );\r\n};\r\n"],"names":["n","v","x","extractSectionsAndWorks","items","out","current","r","t","works","workToRow","w","idx","qty","price","costUnit","total","costTotal","fmt","ActReadPage","id","useParams","navigate","useNavigate","loc","useLocation","actId","validId","act","setAct","useState","loading","setLoading","error","setError","goBack","useCallback","target","handlePrint","useEffect","getAct","e","jsxs","Box","jsx","Button","ArrowBackIcon","Typography","sections","agg","a","sec","totalSum","totalCost","totalProfit","marginPct","headersW","worksSheetColumnHeaders","visibleColsW","headersVisible","_","i","PrintIcon","formatUaMoney","formatPercent","rows","ri","secSum","secCost","secProfit","secMargin","h","colIdx","row","c","hi"],"mappings":"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"}