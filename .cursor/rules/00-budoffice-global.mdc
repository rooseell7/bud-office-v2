---
description: "BUD_OFFICE: глобальні рейки. Діють завжди. Заборона ламати існуючий функціонал, мінімальні зміни, обов'язкові перевірки."
globs:
  - "**/*"
alwaysApply: true
---

## Мета
Ти — агент у проєкті Buduy CRM / BUD_OFFICE. Твоя головна ціль: додати/виправити потрібне, НЕ зламавши вже зроблене.

## Абсолютні заборони
- НЕ роби великих рефакторингів або перестановок файлів/папок без явного ТЗ.
- НЕ міняй UI/візуал/кольори/верстку, якщо задача прямо не про дизайн.
- НЕ змінюй тести, щоб "зробити зеленим". Фікси — тільки кодом. Тести чіпати лише якщо явно сказано.
- НЕ додавай нові бібліотеки/інфраструктуру без явного запиту.

## Алгоритм роботи (обов'язково)
1) Коротко: що зрозумів, які файли зачепиш, ризики регресу.
2) План на 3–7 кроків.
3) Реалізація малими порціями (мінімальний diff).
4) Перевірки: lint/typecheck/build + релевантні тести.
5) Після успіху: звіт "що змінено / як перевірено / що не чіпав".

## Стоп-умови
Якщо задача потенційно ламає архітектуру/Sheet/Collab/Deployment або потребує зміни контрактів API — зупинись і сформулюй 2–3 варіанти рішення з ризиками. Без самодіяльності.

## Контекст
- Є критичний модуль Sheet — чіпати тільки по явному ТЗ.
- Є режим Collab (WS) + REST fallback — не ламати перемикач режимів/ENV.
